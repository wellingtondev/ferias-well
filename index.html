<!doctype html>
<html lang="pt-br">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Status de F√©rias do Wellzito Brabo!</title>
<link rel="icon" type="image/png" href="src/image/favicon.ico" />
<style>
  :root { --sun:#ffd166; --sea:#118ab2; --sand:#ffd9a0; --ink:#0f172a; }
  * { box-sizing:border-box; }

  body{
    margin:0; min-height:100vh; display:grid; place-items:center;
    font:500 16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
    color:var(--ink);
    background:
      radial-gradient(120vmax 60vmax at 100% -20%, var(--sun), transparent 60%),
      linear-gradient(#e0f7ff, #b3ecff 40%, var(--sea) 41%, var(--sea) 60%, var(--sand) 60%);
  }

  .card{
    background:#fff; border:1px solid #e5e7eb; border-radius:16px;
    padding:24px 28px; width:min(640px, 92vw);
    box-shadow:0 10px 30px rgba(2,6,23,.08);
    position:relative; overflow:hidden;
  }
  /* ===== watermark dentro do card ===== */
  .card::after{
    content:"";
    position:absolute; inset:0;
    background:url("src/image/pixel-perfect.png") center/70% no-repeat;
    opacity:.06;
    pointer-events:none;
  }

  .badge{
    display:inline-flex; align-items:center; gap:8px;
    font-weight:700; letter-spacing:.2px;
    padding:6px 10px; border-radius:999px; background:#eef2ff; color:#3730a3;
    position:relative; z-index:1;
  }
  .title{ margin:14px 0 6px; font-size:clamp(22px,3.5vw,28px); font-weight:800; display:flex; gap:.4ch; position:relative; z-index:1; }
  .cursor{ width:.7ch; border-right:2px solid currentColor; animation:blink 1s steps(1) infinite; }
  @keyframes blink { 50% { border-color:transparent } }
  .meta{ color:#475569; margin-bottom:16px; position:relative; z-index:1; }
  .pill{
    display:inline-block; padding:6px 10px; border-radius:999px; background:#f1f5f9; color:#0f172a;
    font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;
    position:relative; z-index:1;
  }
  .footer{ display:flex; gap:10px; flex-wrap:wrap; margin-top:14px; color:#334155; position:relative; z-index:1; }
  code{ background:#0f172a; color:#e2e8f0; padding:3px 6px; border-radius:6px }
  .countdown{ font-size:18px; font-weight:800; color:#0f172a; margin-top:12px; position:relative; z-index:1; }
  .funny{ font-size:14px; color:#475569; margin-top:6px; font-style:italic; position:relative; z-index:1; }
  .bar-wrap{ margin-top:10px; height:10px; background:#e2e8f0; border-radius:999px; overflow:hidden; position:relative; z-index:1; }
  .bar{ height:100%; width:0%; background:#118ab2; transition:width .3s ease }
  .ok{ margin-top:8px; font-size:12px; color:#16a34a; position:relative; z-index:1; }

  /* ====== Foto / perfil ====== */
  .profile{
    display:flex; align-items:center; gap:16px;
    margin:14px 0 6px; position:relative; z-index:1;
  }
  .photo{
    flex:0 0 96px; width:96px; height:96px; border-radius:16px; overflow:hidden;
    border:2px solid #e5e7eb; box-shadow:0 6px 14px rgba(2,6,23,.08);
    background:#f8fafc;
  }
  .photo img{ width:100%; height:100%; object-fit:cover; display:block; }
  .legend{ flex:1 1 auto; min-width:0; display:flex; flex-direction:column; gap:4px; }
  .legend .name{ font-weight:800; color:#0f172a; line-height:1.2; }
  .legend .subtitle{ font-size:13px; color:#475569; line-height:1.2; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .profile + .pill{ margin-top:12px; }
  @media (max-width: 480px){
    .profile{ align-items:flex-start; }
    .legend .subtitle{ white-space:normal; }
  }

  /* ====== coment√°rios ====== */
  .comments { margin-top:22px; position:relative; z-index:1; }
  .comments h2 { font-size:18px; margin:0 0 8px; }
  #comment-form { display:flex; flex-direction:column; gap:8px; }
  #comment-input{
    padding:10px; border:1px solid #e5e7eb; border-radius:8px;
    min-height:70px; resize:vertical; background:#f8fafc;
  }
  #comment-name{
    padding:8px; border:1px solid #e5e7eb; border-radius:8px; background:#fff;
  }
  #comment-form button{
    align-self:flex-end; padding:8px 14px; border:none; border-radius:8px;
    background:#118ab2; color:#fff; font-weight:800; cursor:pointer;
  }
  #comment-form button:hover{ filter:brightness(.95); }
  #comment-list{ margin-top:12px; list-style:none; padding:0; display:flex; flex-direction:column; gap:8px; }
  .comment{
    background:#f1f5f9; border:1px solid #e5e7eb; border-radius:10px; padding:10px;
  }
  .comment .meta{ margin:0 0 4px; font-size:12px; color:#64748b; }
</style>

<script defer>
document.addEventListener('DOMContentLoaded', function(){
  // ===== Datas =====
  const startDate = new Date(2025, 7, 18); // 18/08/2025
  startDate.setHours(0,0,0,0);
  const endDate = new Date(startDate.getTime() + 15*24*60*60*1000);

  // ===== Elementos =====
  const card = document.querySelector('.card');
  const countdownEl = document.getElementById('countdown');
  const funnyEl = document.getElementById('funny');
  const bar = document.getElementById('bar');

  // Indicador de JS ok
  let ok = document.getElementById('ok');
  if (!ok) {
    ok = document.createElement('div');
    ok.id = 'ok';
    ok.className = 'ok';
    const footer = document.querySelector('.footer');
    card.insertBefore(ok, footer);
  }
  ok.textContent = '‚úÖ JavaScript rodando';

  const funnyTexts = [
    "‚òÄÔ∏è Ainda d√° tempo de pegar mais um bronze!",
    "üçπ Hora de mais um drink com guarda-chuvinha!",
    "üèùÔ∏è Se fosse um sprint, estaria no meio do caminho!",
    "ü¶Ä J√° fez amizade com um siri hoje?",
    "üì∏ Poste mais fotos para causar inveja no time!",
    "üõ´ A contagem regressiva para o retorno come√ßou...",
    "üíª N√£o abra o VSCode, resista!",
    "üåä √öltima chamada para mergulhar antes do fim!"
  ];

  function clamp(n,min,max){ return Math.max(min, Math.min(max, n)); }

  function update(){
    const now = new Date();
    const total = endDate - startDate;
    const diff = endDate - now;

    if (now < startDate){
      const toStart = startDate - now;
      const dS = Math.floor(toStart/86400000);
      const hS = Math.floor((toStart/3600000)%24);
      const mS = Math.floor((toStart/60000)%60);
      const sS = Math.floor((toStart/1000)%60);
      countdownEl.textContent = `‚è≥ F√©rias come√ßam em ${dS}d ${hS}h ${mS}m ${sS}s.`;
      funnyEl.textContent = "üß≥ Preparando as malas...";
      bar.style.width = "0%";
      return;
    }

    if (diff <= 0){
      countdownEl.textContent = "‚è≥ F√©rias encerradas!";
      funnyEl.textContent = "üò¢ Hora de dar commit no retorno.";
      bar.style.width = "100%";
      return;
    }

    const d = Math.floor(diff/86400000);
    const h = Math.floor((diff/3600000)%24);
    const m = Math.floor((diff/60000)%60);
    const s = Math.floor((diff/1000)%60);

    countdownEl.textContent = `‚è≥ Faltam ${d}d ${h}h ${m}m ${s}s para o deploy do retorno.`;
    funnyEl.textContent = funnyTexts[Math.floor(Math.random()*funnyTexts.length)];
    bar.style.width = (clamp(1 - diff/total, 0, 1) * 100).toFixed(2) + '%';
  }

  update();
  setInterval(update, 1000);

  // ===== COMENT√ÅRIOS (localStorage) =====
  const commentForm = document.getElementById('comment-form');
  const commentInput = document.getElementById('comment-input');
  const commentName = document.getElementById('comment-name');
  const commentList = document.getElementById('comment-list');

  const STORAGE_KEY = 'ferias-well-comments-v1';
  const comments = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
  comments.forEach(renderComment);

  commentForm.addEventListener('submit', function(e){
    e.preventDefault();
    const text = commentInput.value.trim();
    const name = (commentName.value || 'An√¥nimo').trim();
    if (!text) return;

    const item = { id: Date.now(), name, text, date: new Date().toISOString() };
    comments.push(item);
    localStorage.setItem(STORAGE_KEY, JSON.stringify(comments));
    renderComment(item);

    commentInput.value = '';
  });

  function renderComment(item){
    const li = document.createElement('li');
    li.className = 'comment';
    const date = new Date(item.date);
    li.innerHTML = `
      <div class="meta">${item.name} ‚Ä¢ ${date.toLocaleDateString()} ${date.toLocaleTimeString()}</div>
      <div>${escapeHtml(item.text)}</div>
    `;
    commentList.prepend(li); // mais novo em cima
  }

  // simples prote√ß√£o contra HTML indesejado
  function escapeHtml(str){
    return str.replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[s]));
  }
});
</script>
</head>

<body>
  <main class="card" aria-live="polite">
    <span class="badge">üèñÔ∏è Em F√©rias</span>

    <!-- FOTO -->
    <section class="profile" aria-label="Foto e identifica√ß√£o">
      <div class="photo">
        <img
          src="src/image/file.jpg"
          alt="Foto engra√ßada do Wellington curtindo as f√©rias"
          loading="lazy"
          decoding="async"
        />
      </div>
      <div class="legend">
        <div class="name">Well em modo f√©rias, descobrindo o mundo real</div>
        <div class="subtitle">Status: AFK at√© completar 15 dias a partir de 18/08/2025</div>
      </div>
    </section>

    <p class="pill">// TODO: voltar com vers√£o <strong>relax 1.0.0</strong></p>

    <h1 class="title">
      AFK por 15 dias <span class="cursor" aria-hidden="true"></span>
    </h1>

    <p class="meta">
      Aplicando <strong>patch</strong> de sol, <strong>refatorando</strong> a energia e fazendo
      <code>debug</code> da vitamina D.
    </p>

    <div id="countdown" class="countdown" aria-live="polite"></div>
    <div class="bar-wrap" aria-hidden="true"><div id="bar" class="bar"></div></div>
    <div id="funny" class="funny"></div>

    <div class="footer">
      <span>üß© Bugs encontrados ser√£o tratados como <em>easter eggs</em>.</span>
      <span>ü™Ñ Se algo quebrar: <code>console.log("Vai dar tudo certo")</code></span>
    </div>

    <!-- ===== √Årea de coment√°rios ===== -->
    <section class="comments" aria-label="√Årea de coment√°rios">
      <h2>üí¨ Coment√°rios</h2>
      <form id="comment-form">
        <input id="comment-name" type="text" placeholder="Seu nome (opcional)" />
        <textarea id="comment-input" placeholder="Escreva seu coment√°rio..." required></textarea>
        <button type="submit">Enviar</button>
      </form>
      <ul id="comment-list"></ul>
    </section>
  </main>

  <noscript>Ative o JavaScript para ver o contador das f√©rias üòÖ</noscript>
</body>
</html>
